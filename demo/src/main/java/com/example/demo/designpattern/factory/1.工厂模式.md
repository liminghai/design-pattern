
# 1. 前言
工厂模式有三种：简单工厂和工厂方法比较常用，抽象工厂的应用场景比较特殊，所以很少用到，不是我们学习的重点。

# 2. 为什么需要使用工厂模式
当创建逻辑比较复杂，是一个"大工程"的时候，我们就考虑使用工厂模式，封装对象的创建过程，将对象的创建和使用相分离。

复杂度无法被消除，只能被转移：
1. 不用工厂模式，if-else逻辑、创建逻辑和业务代码耦合在一起；
2. 简单工厂是将不同的创建逻辑放到一个工厂类中，if-else逻辑在这个工厂类中；
3. 工厂方法是将不同的创建逻辑放到不同工厂类中，先用一个工厂类的工厂来得到某个工厂，再用这个工厂来创建对象，if-else逻辑在工厂类的工厂中。

如果对象可以复用，也可以用map缓存。

# 3. 什么时候用哪种工厂模式
## 1. 简单工厂 
类似规则配置解析的例子，代码中存在if-else分支判断，动态地根据不同的类型创建不同的对象，但每个对象的创建逻辑都比较简单的时候，
推荐使用简单工厂模式：将这一大坨if-else创建对象的代码抽离出来，放到工厂类中。

## 2. 工厂方法
还有一种情况，同样的，我们需要根据不同的类型创建不同的对象，但单个对象的创建过程比较复杂，比如前面提到的要组合其他类对象，
做各种初始化操作。在这种情况下，推荐使用工厂方法模式：将创建逻辑拆分得更细，每个对象的创建逻辑独立到各自的工厂类中。


